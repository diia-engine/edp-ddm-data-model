<?xml version="1.0" encoding="UTF-8" standalone="no"?>

<databaseChangeLog
        xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xmlns:ext="http://www.liquibase.org/xml/ns/dbchangelog-ext"
        xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-4.2.xsd
        http://www.liquibase.org/xml/ns/dbchangelog-ext xsd/dbchangelog-ext.xsd">

<!--    <property  name="dataLoadPath"  value="D:\PostgreSQL\csv\uuid\"/>-->
    <property  name="dataLoadPath"  value="/tmp/data-load/uuid/"/>

    <changeSet author="registry owner" id="load data to dictionaries">
        <sql dbms="postgresql" endDelimiter=";" splitStatements="true" stripComments="true">
            CALL p_load_table_from_csv('research','${dataLoadPath}01-Typy_doslidgen_uuid.csv', array['uuid','research_type'], array['research_type']);
            CALL p_load_table_from_csv('refusal_reason','${dataLoadPath}02-Prichiny_vidmov_uuid.csv', array['uuid','document_type','name','constant_code'], array['document_type','name','constant_code']);
            CALL p_load_table_from_csv('koatuu','${dataLoadPath}03-koatuu_uuid.csv', array['uuid','code','level1','level2','type','category','name'], array['code','level1','level2','type','category','name']);
            CALL p_load_table_from_csv('ownership','${dataLoadPath}04-Klasifikazia_form_vlasnosti_uuid.csv', array['uuid','code','name'], array['code','name']);
            CALL p_load_table_from_csv('kopfg','${dataLoadPath}05-kopfg_uuid.csv', array['uuid','code','name'], array['code','name']);
            CALL p_load_table_from_csv('solution_type','${dataLoadPath}06-Typy_rishen_uuid.csv', array['uuid','name','constant_code'], array['name','constant_code']);
            CALL p_load_table_from_csv('application_type','${dataLoadPath}07-Typy_zayav.csv_uuid.csv', array['uuid','name','constant_code'], array['name','constant_code']);
            CALL p_load_table_from_csv('staff_status','${dataLoadPath}08-Status_spivrobitnika_uuid.csv', array['uuid','name','constant_code'], array['name','constant_code']);
            CALL p_load_table_from_csv('factor','${dataLoadPath}09-factors_uuid_new.csv', array['uuid','code','factor_type','name','notes'], array['code','factor_type','name','notes']);

            CALL p_load_table_from_csv('laboratory','${dataLoadPath}laboratory.csv'
            ,array['uuid','name','koatuu_id','address','phone_number','head_name','edrpou','ownership_id','kopfg_id','accreditation_flag','accreditation_end_date','notes','infolist_inclusion_flag','infolist_inclusion_date','deny_infolist_inclusion_flag','infolist_exclusion_flag','infolist_exclusion_date']
            ,array['name','koatuu_id','address','phone_number','head_name','edrpou','ownership_id','kopfg_id','accreditation_flag','accreditation_end_date','notes']
            );

            CALL p_load_table_from_csv('staff','${dataLoadPath}staff.csv'
            ,array['uuid','col2','laboratory_id','staff_status_id','researches','full_name','hygienist_flag','full_time_flag','salary','fixed_term_contract_flag','contract_end_date','specialization_date','specialization_end_date','dismissal_flag','dismissal_date']
            ,array['laboratory_id','staff_status_id','researches','full_name','hygienist_flag','full_time_flag','salary','fixed_term_contract_flag','contract_end_date','specialization_date','specialization_end_date','dismissal_date']
            );

            CALL p_load_table_from_csv('registration','${dataLoadPath}registration.csv'
            ,array['uuid','registration_no','created_date','registration_source','application_type_id','accepted_by','laboratory_id','colX','reg_compliance_flag','reg_refusal_reason_id','factor_compliance_flag','factor_refusal_reason_id','reagent_compliance_flag','reagent_refusal_reason_id','zvt_compliance_flag','zvt_refusal_reason_id','staff_compliance_flag','staff_refusal_reason_id','facility_compliance_flag','facility_refusal_reason_id','health_ministry_letter_compliance_flag','health_ministry_letter_compliance_reason_id','health_ministry_letter_number','health_ministry_letter_date','solution_type_id','solution_date','exclusion_order_no','exclusion_order_date','letter_no','letter_date','received_by','certified_by','notes','factors']
            ,array['registration_no','created_date','registration_source','application_type_id','accepted_by','laboratory_id','reg_compliance_flag','reg_refusal_reason_id','factor_compliance_flag','factor_refusal_reason_id','reagent_compliance_flag','reagent_refusal_reason_id','zvt_compliance_flag','zvt_refusal_reason_id','staff_compliance_flag','staff_refusal_reason_id','facility_compliance_flag','facility_refusal_reason_id','health_ministry_letter_compliance_flag','health_ministry_letter_compliance_reason_id','health_ministry_letter_number','health_ministry_letter_date','solution_type_id','solution_date','exclusion_order_no','exclusion_order_date','letter_no','letter_date','received_by','certified_by','notes','factors']
            );
        </sql>
    </changeSet>

</databaseChangeLog>
