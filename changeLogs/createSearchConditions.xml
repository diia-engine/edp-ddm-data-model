<?xml version="1.0" encoding="UTF-8" standalone="no"?>

<databaseChangeLog
        xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xmlns:ext="http://www.liquibase.org/xml/ns/dbchangelog-ext"
        xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-4.2.xsd
        http://www.liquibase.org/xml/ns/dbchangelog-ext xsd/dbchangelog-ext.xsd">

	<changeSet author="registry owner" id="searchConditions">

		<ext:createSimpleSearchCondition name="kopfg_simple" indexing="true" limit="all">
			<ext:table name="kopfg" alias="k" searchColumn="name" searchType="startsWith"/>
		</ext:createSimpleSearchCondition>

		<ext:createSearchCondition name="staff_profession" indexing="true">
			<ext:table name="staff" alias="s">
				<ext:column name="staff_id" returning="true"/>
				<ext:column name="full_name" searchType="contains" returning="true"/>
				<ext:column name="specialization_date" returning="true"/>
			</ext:table>
			<ext:table name="profession" alias="p">
				<ext:column name="code_kp" alias="code_kp" returning="true"/>
				<ext:column name="name" alias="profession_name" searchType="equal" returning="true"/>
			</ext:table>
			<ext:join type="inner">
				<ext:left alias="s">
					<ext:column name="profession_id"/>
				</ext:left>
				<ext:right alias="p">
					<ext:column name="profession_id"/>
				</ext:right>
			</ext:join>
		</ext:createSearchCondition>

<!--
		<ext:createSimpleSearchCondition name="kopfg_simple_no_search" limit="all">
			<ext:table name="kopfg" alias="k"/>
		</ext:createSimpleSearchCondition>

		<ext:createSearchCondition name="staff_profession_no_search" indexing="true">
			<ext:table name="staff" alias="s">
				<ext:column name="staff_id"/>
				<ext:column name="full_name"/>
				<ext:column name="specialization_date"/>
			</ext:table>
			<ext:table name="profession" alias="p">
				<ext:column name="code_kp" alias="code_kp" searchType="contains"/>
				<ext:column name="name" alias="profession_name" searchType="equal"/>
			</ext:table>
			<ext:join type="inner">
				<ext:left alias="s">
					<ext:column name="profession_id"/>
				</ext:left>
				<ext:right alias="p">
					<ext:column name="profession_id"/>
				</ext:right>
			</ext:join>
		</ext:createSearchCondition>
-->

	</changeSet>

</databaseChangeLog>
